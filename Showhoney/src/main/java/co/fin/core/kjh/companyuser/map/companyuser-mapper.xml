<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="co.fin.core.kjh.companyuser.serviceImpl.CompanyUserMapper">
	<select id="getSelectList" resultType="co.fin.core.kjh.companyuser.vo.CompanyUserVo">
		SELECT * FROM COMPANY_USER
	</select>
	
 	<select id="getSelect" parameterType="co.fin.core.kjh.companyuser.vo.CompanyUserVo" resultType="co.fin.core.kjh.companyuser.vo.CompanyUserVo">
		SELECT * FROM COMPANY_USER WHERE 
		 <choose>
    <when test="company_user_id != null and company_user_id != ''">
      company_user_id = #{company_user_id}
    </when>
    <otherwise>
      	COMPANY_NO = #{company_no}
    </otherwise>
  </choose>
	
	</select>
	
	
	<insert id="companyInsert" parameterType="co.fin.core.kjh.companyuser.vo.CompanyUserVo">
		<selectKey resultType="int" keyProperty="company_no" order="BEFORE">
        	SELECT SEQ_COMPANY_NO.nextval FROM dual
    	</selectKey>   
		INSERT INTO COMPANY VALUES(#{company_no},#{company_name},#{company_phone},#{company_addr},#{company_email},#{ceo_name},#{ceo_phone},#{business_license_number})
	</insert>
	
	<insert id="companyUserInsert" parameterType="co.fin.core.kjh.companyuser.vo.CompanyUserVo">
		
		INSERT INTO COMPANY_USER (COMPANY_USER_ID,COMPANY_USER_PW,COMPANY_NO,COMPANY_PROFILE) VALUES(#{company_user_id},#{company_user_pw},#{company_no},#{company_profile})
	</insert>
	
	<insert id="companyUserInsert2" parameterType="co.fin.core.kjh.companyuser.vo.CompanyUserVo">
		INSERT INTO COMPANY_USER (COMPANY_USER_ID,COMPANY_USER_PW,COMPANY_NO,COMPANY_PROFILE) VALUES(#{company_user_id2},#{company_user_pw2},#{company_no},#{company_profile})
	</insert>
	
	<insert id="companyUserInsert3" parameterType="co.fin.core.kjh.companyuser.vo.CompanyUserVo">
		INSERT INTO COMPANY_USER (COMPANY_USER_ID,COMPANY_USER_PW,COMPANY_NO,COMPANY_PROFILE) VALUES(#{company_user_id3},#{company_user_pw3},#{company_no},#{company_profile})
	</insert>

	<update id="companyUserUpdate" parameterType="co.fin.core.kjh.companyuser.vo.CompanyUserVo">
		UPDATE COMPANY_USER
		<set>
			company_user_pw = #{company_user_pw}
			<if test="company_profile != null and company_profile = ''">
				,company_profile = #{company_profile}	
			</if>
		</set>
		WHERE company_no = #{company_no}
	</update>
	
	
	<update id="companyUpdate" parameterType="co.fin.core.kjh.companyuser.vo.CompanyUserVo">
		UPDATE COMPANY
		<set>
			company_name = #{company_name}, company_phone = #{company_phone}, company_addr = #{company_addr}, company_email = #{company_email}, ceo_name = #{ceo_name}, ceo_phone = #{ceo_phone}
		</set>
		WHERE company_no = #{company_no } 
	</update>
	
	<delete id="companyUserDelete" parameterType="co.fin.core.kjh.companyuser.vo.CompanyUserVo">
		
	</delete>
	
</mapper>